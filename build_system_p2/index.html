<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.66">
<title data-react-helmet="true">Build system basics - part 2 | 101</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_language" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Build system basics - part 2 | 101"><meta data-react-helmet="true" name="description" content="[Part 1] discussed a few basic concepts related to build systems. Part 2"><meta data-react-helmet="true" property="og:description" content="[Part 1] discussed a few basic concepts related to build systems. Part 2"><meta data-react-helmet="true" property="og:url" content="https://felipepiovezan.github.io//build_system_p2"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://felipepiovezan.github.io//build_system_p2"><link rel="stylesheet" href="/styles.58710d0f.css">
<link rel="preload" href="/styles.9959f271.js" as="script">
<link rel="preload" href="/runtime~main.d03f4df4.js" as="script">
<link rel="preload" href="/main.4365fb5f.js" as="script">
<link rel="preload" href="/1.43c5d01a.js" as="script">
<link rel="preload" href="/2.cf4e590e.js" as="script">
<link rel="preload" href="/13.c5726d0f.js" as="script">
<link rel="preload" href="/935f2afb.ea3778ed.js" as="script">
<link rel="preload" href="/17896441.2afc73b6.js" as="script">
<link rel="preload" href="/23ef7a7b.969b3639.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="My Site Logo"><strong class="navbar__title">Blog</strong></a><a href="https://github.com/felipepiovezan" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><a href="https://twitter.com/fpiovezan" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Twitter</a><a href="https://linkedin.com/in/felipepiovezan" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">LinkedIn</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">üåú</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">üåû</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="My Site Logo"><strong class="navbar__title">Blog</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://github.com/felipepiovezan" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li><li class="menu__list-item"><a href="https://twitter.com/fpiovezan" target="_blank" rel="noopener noreferrer" class="menu__link">Twitter</a></li><li class="menu__list-item"><a href="https://linkedin.com/in/felipepiovezan" target="_blank" rel="noopener noreferrer" class="menu__link">LinkedIn</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLinkText_2zSB">About me</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/">About me</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_2zSB">Posts</a><ul class="menu__list"><li class="menu__list-item"><a href="https://felipepiovezan.github.io/cpp_abstract_machine" target="_blank" rel="noreferrer noopener" class="menu__link" tabindex="0">The C++ abstract machine [opens in new tab]</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/git_basics">A Git introduction with no commands</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/const_constinit_constexpr_consteval">Static variables, static storage, static initialization, constant initialization, constinit, constexpr</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/build_system_p2">Build system basics - part 2</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/build_system_basics">Build system basics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/improve_spam">Topological sorting - ACM-ICPC</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Build system basics - part 2</h1></header><div class="markdown"><p><a href="http://felipepiovezan.gitlab.io/blog/build_system_basics/" target="_blank" rel="noopener noreferrer">Part 1</a> discussed a few basic concepts related to build systems. Part 2
focuses on how one can use CMake to accomplish the goals described in Part 1.</p><p>There are <strong>many</strong> good CMake tutorials out there, but their aim is usually to
teach through practical examples. As part 1 demonstrated, I want to take a more
fundamental approach, and focus on the concepts rather than on their
implementation or detailed explanations about particular CMake functions. Once
the fundamentals are understood, other tutorials, talks and documentation will
make a lot more sense. I will link some useful resources that can be used to
take this to the next level.</p><p>The first order of business is to clarify a small lie that has been told.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="cmake-is-not-a-build-system"></a>CMake is not a build system.<a aria-hidden="true" tabindex="-1" class="hash-link" href="#cmake-is-not-a-build-system" title="Direct link to heading">#</a></h2><p>Strictly speaking, CMake is a build system <em>generator</em>. In other words, CMake
reads the project description and, instead of building the project, it simply
generates build description files for a <a href="https://cmake.org/cmake/help/latest/manual/cmake-generators.7.html#cmake-generators" target="_blank" rel="noopener noreferrer">build system of your choice</a>. In other
words, CMake by itself is not enough to build a project.</p><p><img alt="example 1" src="/assets/images/system_gen-5dd5634ecfc61e1400114ce825d42a5a.svg"></p><p>As the picture shows, CMake will place the build system description file
(Makefile, build.ninja, etc) inside the <em>build directory</em>. It might seem odd at
first, but it makes sense if one views the build system as a property of a
particular build, not as a property of the project itself. For example, a build
on Windows will likely use a different build system than a build on Mac.</p><p>Consider, for instance, a project based exclusively on the ninja system. A
Windows developer who wants to work on this project and use Visual Studio would
have to hope Visual Studio has support for Ninja. The same applies for
Mac/Xcode, or any other platform. Alternatively, the project can use CMake and
generate native Visual Studio / Xcode build descriptions for those builds.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="the-canonical-cmake-invocation"></a>The canonical CMake invocation<a aria-hidden="true" tabindex="-1" class="hash-link" href="#the-canonical-cmake-invocation" title="Direct link to heading">#</a></h2><p>To start a CMake-based build, gather the following information:</p><ol><li>The source directory path, <code>$SOURCE_DIRECTORY</code>.</li><li>The build directory path, <code>$BUILD_DIRECTORY</code>.</li><li>The desired build system, <code>$BUILD_SYSTEM</code>. (<code>Ninja</code>, <code>Unix Makefiles</code>, etc)</li></ol><p>Then, run:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> </span><span class="token variable" style="color:rgb(191, 199, 213)">$BUILD_DIRECTORY</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">cmake </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">-G </span><span class="token variable" style="color:rgb(191, 199, 213)">$BUILD_SYSTEM</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token variable" style="color:rgb(191, 199, 213)">$SOURCE_DIRECTORY</span></div></div></div></div></div><p>Those steps generate the required files inside the build directory. To build,
either run the build system specific command inside the build directory
(<code>make</code>, <code>ninja</code>, etc) or let CMake abstract this in a system-agnostic way:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">cmake --build </span><span class="token variable" style="color:rgb(191, 199, 213)">$BUILD_DIRECTORY</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="cmakeliststxt-files"></a>CMakeLists.txt files<a aria-hidden="true" tabindex="-1" class="hash-link" href="#cmakeliststxt-files" title="Direct link to heading">#</a></h2><p>A CMake-based project will contain many CMakeLists.txt files throughout its
directory hierarchy. These files contain a description of each module
(<em>target</em>) in the project and their relationship (<em>properties</em>); it is the
programmer&#x27;s goal to express those ideas as cleanly as possible using the
<em>CMake language</em>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="the-cmake-language"></a>The CMake language<a aria-hidden="true" tabindex="-1" class="hash-link" href="#the-cmake-language" title="Direct link to heading">#</a></h2><p>The CMake language is just a programming language, it has functions, loops,
conditionals, etc.  It also has its quirks and oddities. Like any language, it
is merely a tool to express intent, and getting the basics right is crucial to
writing expressive code.</p><p>It&#x27;s impossible to fully describe the language in a blog, but there is one key
concept that needs to be explained.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="strings-string-everywhere"></a>Strings, string everywhere!<a aria-hidden="true" tabindex="-1" class="hash-link" href="#strings-string-everywhere" title="Direct link to heading">#</a></h3><p>In the CMake language, almost everything is a string. The contents of a
variable is a string, the variable name itself is a string. Here&#x27;s how one
would write an assignment command:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-CMake codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">set(my_var hello)</span></div></div></div></div></div><p>The mental model I use when thinking about the CMake language is that
&quot;assignment to a variable creates a map from a string to another&quot;. In other
words:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-c++ codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">map[&quot;my_var&quot;] = &quot;hello&quot;;</span></div></div></div></div></div><p>Dereferencing a variable is done with the <code>${}</code> operator:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-CMake codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">${my_var}</span></div></div></div></div></div><p>We can think of it simply querying the map:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-c++ codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">map[&quot;my_var&quot;]</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="go-crazy"></a>Go crazy<a aria-hidden="true" tabindex="-1" class="hash-link" href="#go-crazy" title="Direct link to heading">#</a></h3><p>Convince yourself you understand what these lines are doing:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-CMake codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">set(hello_str hello)                 # map[‚Äúhello_str‚Äù] = ‚Äúhello‚Äù</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">set(world_str world)                 # map[‚Äúworld_str‚Äù] = ‚Äúworld‚Äù</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">set(helloworld ‚ÄúHello world!‚Äù)       # map[‚Äúhelloworld‚Äù] = ‚ÄúHello world!‚Äù</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">${hello_str}                         # Queries map[‚Äúhello_str‚Äù] finds ‚Äúhello‚Äù</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">${${hello_str}}                      # Queries map[‚Äúhello‚Äù]... empty!</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">${${hello_str}${world_str}}          # Queries map[‚Äúhelloworld‚Äù] finds ‚ÄúHello world!‚Äù</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="a-word-on-whitespaces"></a>A word on whitespaces<a aria-hidden="true" tabindex="-1" class="hash-link" href="#a-word-on-whitespaces" title="Direct link to heading">#</a></h3><p>Whitespaces separating two strings cause those strings to be interpreted as a
list, internally represented as a semicolon-separated concatenation of the
strings.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-CMake codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">set(my_var hello world)              # map[‚Äúmy_var‚Äù] = ‚Äúhello;world‚Äù</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">set(my_var hello;world)              # same as above.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">set(my_var ‚Äúhello world‚Äù)            # map[‚Äúmy_var‚Äù] = ‚Äúhello world‚Äù</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="targets"></a>Targets<a aria-hidden="true" tabindex="-1" class="hash-link" href="#targets" title="Direct link to heading">#</a></h2><p>In CMake, a <code>target</code> is anything one wants to build. It is typically an
executable or a library, but it&#x27;s possible to define any custom set of
commands.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-CMake codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">add_executable(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  executable1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    executable1_source.cpp</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">add_library(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  library1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    library1_source.cpp</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">)</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="properties"></a>Properties<a aria-hidden="true" tabindex="-1" class="hash-link" href="#properties" title="Direct link to heading">#</a></h2><p>Properties provide information on <code>targets</code>. There are three flavors of properties:</p><ul><li>Private: information about <strong>how</strong> the target does something. Other targets
need not be aware of private properties.</li><li>Interface: information about <strong>what</strong> the target does. Other targets need to
know about interfaces.</li><li>Public: information that is both private and on the interface.</li></ul><p>Let&#x27;s look at one such property: include directories. This specifies include
paths the compiler should use when looking for header files.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-CMake codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">target_include_directories(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  library1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    PRIVATE /my/private/path</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    PUBLIC /my/public/path</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">)</span></div></div></div></div></div><p>Note the two distinct paths specified above. The <code>PRIVATE</code> path will not be
visible to any other targets using <code>my_lib1</code>, whereas the <code>PUBLIC</code> path will.
To understand this, let&#x27;s look at the link libraries property:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-CMake codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">target_link_libraries(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  executable1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    PRIVATE library1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">)</span></div></div></div></div></div><p>This expresses that <code>executable1</code> needs to be linked against <code>library1</code>.
Furthermore, <code>executable1</code> also depends privately on everything that is part of
<code>library1</code>&#x27;s interface. In particular, the <code>/my/public/path</code> include path will
also be visible to <code>executable1</code>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="visual-representation"></a>Visual representation<a aria-hidden="true" tabindex="-1" class="hash-link" href="#visual-representation" title="Direct link to heading">#</a></h2><p>Targets are the building blocks of a CMake project description and properties
tell CMake how to build targets. Linking targets cause properties to flow from
one target to another transitively and create dependencies that define an order
in which actions must happen at build time.</p><p>The dependency between targets and the flow of properties can be visualized by
passing <code>--graphviz=&lt;some_prefix&gt;</code> to the CMake command call. It will cause
CMake to generate a DOT graph file that can be plotted to generate something
like this:</p><p><img alt="example 2" src="/assets/images/dot_graph-b6699569c28727b7b43b1bae925e77e1.svg"></p><p>If you can (easily) produce such a graph for your project, you have a clear
understanding of the project as a whole.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="conclusion"></a>Conclusion<a aria-hidden="true" tabindex="-1" class="hash-link" href="#conclusion" title="Direct link to heading">#</a></h2><p>At the end of part 1, we concluded by listing some symptoms of bad build systems.
Let&#x27;s see how a CMake-based project handles those issues.</p><blockquote><p>How easy is it to spawn a second build from the same source directory?</p></blockquote><p>Simply create a new empty build directory and rerun the CMake configure command.</p><blockquote><p>How easy is it to identify files that must be under version control?</p></blockquote><p>A file must be under version control if and only if it is inside the source
directory.</p><blockquote><p>Can you identify the compiler that is used in a given build? How easily can
that be changed?</p></blockquote><p>The CMake command prints out the C and C++ compilers detected as part of the
configure command. A different compiler may be used by passing extra flags to
the configure command: <code>-DCMAKE_CXX_COMPILER=path/to/c++/compiler</code> and
<code>-DCMAKE_C_COMPILER=path/to/c/compiler</code>. The <code>cmake-gui</code> tool (shipped with CMake)
allows inspection of the current configuration of a given build directory.</p><blockquote><p>Can you build a single component of the project and its dependencies,
without building anything unnecessary?</p></blockquote><p>Yes, just run <code>cmake --build $BUILD_DIRECTORY --target &lt;target_name&gt;</code>.</p><blockquote><p>If a source file is changed, how easy is it to incrementally build the
affected components?</p></blockquote><p>Simply rerun <code>cmake --build $BUILD_DIRECTORY</code>.</p><hr><p>Here I stop, having taken you from the basics of building to the fundamentals
of CMake, with the hopes that you&#x27;ll find other tutorials much more palatable
than they were for me. There are suggestions below if you want to continue your
journey on this world of building software; knowing how to build existing
projects and how to start new ones is a useful skill to have. If you want to
stop, I don&#x27;t blame you. It is no easy road.</p><hr><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="further-reading"></a>Further reading<a aria-hidden="true" tabindex="-1" class="hash-link" href="#further-reading" title="Direct link to heading">#</a></h2><ul><li><p>The <a href="https://cmake.org/cmake/help/v3.17/" target="_blank" rel="noopener noreferrer">CMake documentation</a> is really good and comprehensive, I use it a lot
and it rarely disappoints. Learn how to navigate this and interpret the docs
and you&#x27;ll be able to understand new commands and functions much faster (this
is a general advice for any software). For example, read the <em>Normal libraries</em>
section of the <a href="https://cmake.org/cmake/help/latest/command/add_library.html#normal-libraries" target="_blank" rel="noopener noreferrer">add_library</a> documentation, a command we used in this
tutorial.</p></li><li><p>The &quot;official&quot; <a href="https://cmake.org/cmake/help/latest/guide/tutorial/index.html" target="_blank" rel="noopener noreferrer">CMake tutorial</a> covers a <strong>lot</strong> of material. As such, it is
a good way to survey everything that can be done with CMake, without going into
too much detail. You should be able to follow it having read these two blog
posts.</p></li><li><p>Craig Scott&#x27;s <a href="https://crascit.com/professional-cmake/" target="_blank" rel="noopener noreferrer">Professional CMake</a> book is great both as a learning tool
and as a reference. Whenever I find myself thinking <em>How do I do X again?</em> or
<em>I&#x27;m sure there is a better way to this</em>, this book comes to the rescue.  It
was also my primary way to learn about CMake.</p></li><li><p>Daniel Pfeifer&#x27;s <a href="https://www.youtube.com/watch?v=bsXLMQ6WgIk" target="_blank" rel="noopener noreferrer">Effective CMake</a> talk is a good introduction to the CMake
language and to good CMake practices. The second half of the talk is pretty
heavy on details though, so don&#x27;t worry too much about it right now.</p></li></ul></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/const_constinit_constexpr_consteval"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">¬´ Static variables, static storage, static initialization, constant initialization, constinit, constexpr</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/build_system_basics"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Build system basics ¬ª</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#cmake-is-not-a-build-system" class="table-of-contents__link">CMake is not a build system.</a></li><li><a href="#the-canonical-cmake-invocation" class="table-of-contents__link">The canonical CMake invocation</a></li><li><a href="#cmakeliststxt-files" class="table-of-contents__link">CMakeLists.txt files</a></li><li><a href="#the-cmake-language" class="table-of-contents__link">The CMake language</a><ul><li><a href="#strings-string-everywhere" class="table-of-contents__link">Strings, string everywhere!</a></li><li><a href="#go-crazy" class="table-of-contents__link">Go crazy</a></li><li><a href="#a-word-on-whitespaces" class="table-of-contents__link">A word on whitespaces</a></li></ul></li><li><a href="#targets" class="table-of-contents__link">Targets</a></li><li><a href="#properties" class="table-of-contents__link">Properties</a></li><li><a href="#visual-representation" class="table-of-contents__link">Visual representation</a></li><li><a href="#conclusion" class="table-of-contents__link">Conclusion</a></li><li><a href="#further-reading" class="table-of-contents__link">Further reading</a></li></ul></div></div></div></div></main></div></div></div>
<script src="/styles.9959f271.js"></script>
<script src="/runtime~main.d03f4df4.js"></script>
<script src="/main.4365fb5f.js"></script>
<script src="/1.43c5d01a.js"></script>
<script src="/2.cf4e590e.js"></script>
<script src="/13.c5726d0f.js"></script>
<script src="/935f2afb.ea3778ed.js"></script>
<script src="/17896441.2afc73b6.js"></script>
<script src="/23ef7a7b.969b3639.js"></script>
</body>
</html>